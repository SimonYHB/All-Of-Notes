

- 代码混淆

  - 基本概念

    - 什么是加固
    - 常见加固方式
      - iOS常用代码混淆

  - 为什么要混淆

    - iOS可以被破壳获取类型、方法名等，代码混淆可增加逆向难度

  - iOS代码混淆方案

    - 源码混淆

      - 工具参考： MJCodeObfuscation

      - 通过宏定义混淆方法名、类型

        - 通过设置宏，可在编译时生成混淆代码，且不影响开发时代码阅读
        - 注意点
          - 不能混淆系统方法
          - 不能混淆init开头的等初始化方法
          - 混淆属性时需要额外注意set方法
          - 如果xib、storyboard中用到了混淆的内容，需要手动修正
          - 可以考虑把需要混淆的符号都加上前缀，跟系统自带的符号进行区分
          - 混淆过多可能会被AppStore拒绝上架，需要说明用途

      - ios-class-guard

        - 原理

          该工具是基于class-dump的拓展，用class-dump扫描出可执行文件中的类名、方法名、属性名等并做替换，会更新xib和storyboard的名字等等

        - 用法

          ```
          $ brew install ios-class-guard
          $ ios-class-guard [options] <mach-o-file>
          ```

        - 常用参数

      - 混淆代码逻辑

        - 加入无用逻辑代码

      - 字符串加密

        - 自行制定算法，例如对字符串中的每个字符进行异或(^)，要使用时再一次异或取得原字符

    - LLVM IR混淆 (ollvm)

    

